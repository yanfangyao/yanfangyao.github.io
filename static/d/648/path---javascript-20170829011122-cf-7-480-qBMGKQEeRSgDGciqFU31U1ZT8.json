{"data":{"site":{"siteMetadata":{"title":"William's Blog","author":"William"}},"markdownRemark":{"id":"f8f57f4e-f298-5826-a6d7-cbe6612a86da","excerpt":"JS数据类型 　　ECMAScript 5（ES 5）规定了5种简单（基本）数据类型： undefined、null、boolean、number、string 以及1种复杂数据类型： object 。ECMAScript 6（ES 6）增加了1个基本数据类型： symbol 。使用 typeof…","html":"<h2>JS数据类型</h2>\n<p>　　ECMAScript 5（ES 5）规定了5种简单（基本）数据类型：<font color=#6AC54D>undefined、null、boolean、number、string</font>以及1种复杂数据类型：<font color=#6AC54D>object</font>。ECMAScript 6（ES 6）增加了1个基本数据类型：<font color=#6AC54D>symbol</font>。使用<em>typeof</em>可以检测变量值的类型（值得注意的是JS中的变量没有类型），<em>typeof</em>可以返回的结果有7种：<font color=#FF8800>“undefined”、“object”、“boolean”、\n“number”、“string”、“function”、“symbol”</font>。<br>\n　　上述7种<em>typeof</em>返回的结果中，只有 “function” 找不到与之对应的基本数据类型。function其实是object的一个子类型。具体来说，function是可以被调用的对象，它有一个内部属性 “call”，使其可以被调用。另外，JS中的array类型也是object的子类型，只不过array是按照数值顺序来进行元素的索引，普通object是通过字符串键值来索引。在ES 5中，<em>typeof</em>对没有定义的变量（<em>typeof</em>不会报出 “Uncaught ReferenceError” 错误）或者已被定义但是没有初始化的变量返回的结果均是 “undefined”，因此可以用来检测变量是否已被定义或者初始化。<font color=#FF0000>但是ES 6引入了let命令，它会形成<a href=\"http://es6.ruanyifeng.com/#docs/let\"><em>temporal dead zone</em>（暂时性死区）</a>，<em>typeof</em>在let命令声明变量之前使用变量会报出 “Uncaught ReferenceError” 错误</font>。</p>\n<h2>JS变量</h2>\n<p>　　按照第１节的介绍，JS变量存储的值可以分为两种类型：基本类型和引用类型(复杂类型)。基本类型对应于6种基本数据类型（undefined、null、boolean、number、string、symbol）。引用类型对应于JS中的对象（object）。基本类型和引用类型各自的特点如下：</p>\n<ol>\n<li><em>基本类型的值占用固定大小的内存空间，其被分配在栈空间中；引用类型的值是对象，其占用的存储空间大小可以动态改变，其被分配在堆空间中</em>。</li>\n<li><em>引用类型是一种数据结构，它将数据和功能组织在一起。存储引用类型的变量实际上存储的是指向对象的指针。</em></li>\n<li><em>复制基本类型的值，会创建这个值的副本；复制引用类型的值，会创建指向对象的指针的副本；JS中所有函数的参数传递都是按值传递的。</em></li>\n</ol>\n<h2>JS作用域&#x26;作用域链</h2>\n<p>　　JS变量是有其对应的作用域（或者执行环境）的。作用域决定了变量的生命周期以及哪一部分代码可以访问相应的变量。JS中的作用域有全局和局部之分，全局作用域是最外围的一个执行环境，如window，每定义一个函数就定义了一个局部作用域(函数作用域)；ES 6中的let命令引入了另外一种局部作用域，块级作用域(”{ }“形成的作用域)。每个作用域都有一个与之关联的变量对象，该对象保存了该作用域中定义的所有变量和函数。<br>\n　　当JS代码在某个作用域中执行时，会创建变量对象的一个作用域链，这个作用域链可以保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的起始是当前作用域，下一个是当前环境的包含环境（父作用域），依此类推直到全局作用域，由此形成了一个作用域链。作用域链的概念可由图1来刻画。</p>\n<div style=\"text-align: center;\">\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6373162c604708e49589a5e7b278a981/b197e/js_scope.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 311px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.89710610932475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOElEQVQ4y42VW2/aQBCF/f//Rx/6UimvVdpIbSMkqpRIrVKSkkICDmB8v1/369hA6oC5rBgtoPHZc+bMjjUjXYJxBw8XMLmC4QfQ+5iZSVWVoJR8VLM3q/29Y2l69ETgPeJZP/HdP4QSnjNkEesI1Bpjm30E6BUwKSKCMiRWOQth2zevSVVJVqaoqkKZJsqyUEFwHsPdP8xkzkqipIJCAL/3Ube3qJubNdNNCRTdoJraJmxrJSsW1st4RlQEew+oE7K1dlIbNCpCRv4QK7OIqoRAwOsy7OYdlNxO8jKnke6HMxz3Ad8b4YXPwlo/H7DN1MkdingFz99g/Anu3sOs17SSUtVR6Z2AYe4zj56xkgVmumIaPGLH8z2G7VIdBaxXXuVkVUZZFfyQVpoEo728LlCty8UuMXUrjf375qA6p9pIP4vhriRfTLJE+iya8CI3qy6DIQcYycseU+1QP7WTajPKaAFPX+DvR/j1Tij/ZpUawrQ8LrmLsS2AfrIkkTaKQp00mJKldmPSrqqzAGtj3MzGzT0Jl6/LS6Yiv9ywa+drp6ZHV7/VA2UiBhlyPZWMuFKMquNsyW2TancdMcXMLe6jEUZuY5a+hNeYpHWgvB1Tm9iCF9KbptxvgsV6IE+vZf8sew89HB8A7AD9X8+ceaITOw+E0ysiY0A475HM+00ZtCN63/7czsJNX7qFj6dSvCqSSNYhxmlHgQYDuLyEC3nf9HqvoCfn4UHJ9dh3XWniFcq29wzqin+QpLokYp00xQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"作用域链\"\n        title=\"\"\n        src=\"/static/6373162c604708e49589a5e7b278a981/b197e/js_scope.png\"\n        srcset=\"/static/6373162c604708e49589a5e7b278a981/e962e/js_scope.png 148w,\n/static/6373162c604708e49589a5e7b278a981/afbb0/js_scope.png 295w,\n/static/6373162c604708e49589a5e7b278a981/b197e/js_scope.png 311w\"\n        sizes=\"(max-width: 311px) 100vw, 311px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n</div>\n<div style=\"text-align: center;\">图 1 JavaScript作用域链</div>\n　　在作用域链中，子作用域（执行环境）中的代码可以访问其父作用域中的变量或函数，但是父作用域中的代码不能访问子作用域中的变量或函数。<font color=#6AC54D>标志符的解析是沿作用域链从当前作用域向上一级一级地解析，直到解析到全局环境，如果在全局环境还是没有找到标志符的定义，则JS代码会报出\"Uncaught ReferenceError\"错误</font>。\n<h2>JS的垃圾收集策略 ##s</h2>\n<p>　　JS是一门具有内存自动分配和回收机制的语言，开发人员无法进行内存的分配和回收。垃圾回收制度深刻影响着JS的性能。<br>\n　　目前JS的垃圾搜集算法主要有两种：<font color=#6AC54D>标记清除和引用计数</font>。标记清除算法是将当前不使用的值加上标记然后回收其内存，如当某个变量离开了当前环境则将其值标记为可以回收。引用计数算法是用来记录每个值被引用的次数，当次数为0时表示该值所占用的内存空间可以回收。<font color=#FF0000>引用计数算法会陷入循环引用的问题</font>，如变量a和b互相引用，导致变量a和b所占据的内存均无法回收，消耗系统资源，严重时可极大降低系统性能。</p>\n<h2>优化内存管理</h2>\n<p>　　尽管JS是自动实现内存的分配与回收，开发人员仍然可以通过养成良好的编码习惯来优化内存管理。<font color=#6AC54D>对于不再使用的引用类型，开发人员可以手动将其赋值为null，这样做不仅便于JS的垃圾搜集，而且还可以避免循环引用的问题</font>。</p>\n<h2>创建对象的几种方式</h2>\n<ol>\n<li>\n<p>new + constructor（构造函数）</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>对象字面量</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>根据给定的原型和属性(可选)来构建对象，Object.create(proto[, propertiesObject])</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 构造对象的原型为null</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 同对象字面量</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 构造一个原型为fn，包含属性add的对象</span>\n<span class=\"token keyword\">const</span> fn <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>add<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<h2>定义函数的几种方式</h2>\n<ol>\n<li>\n<p>通过函数声明的方式定义</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">example</span><span class=\"token punctuation\">(</span>arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> arg1 <span class=\"token operator\">+</span> arg2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>通过函数表达式定义</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">example</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> arg1 <span class=\"token operator\">+</span> arg2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>使用构造函数</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> example <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"arg1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"arg2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"return arg1 + arg2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<h2>函数声明与函数表达式</h2>\n<p>　　JS解析器会率先读取函数声明，并使函数在执行任何代码之前可以被访问，函数表达式必须等到解析器执行到它所在的代码时才会被执行。这就是函数声明提升的概念。</p>\n<h2>函数内部对象</h2>\n<p>　　函数内部存在两个特殊的对象：<em>arguments</em>和<em>this</em>。<em>arguments</em>是一个类数组，包含着传入函数中的所有参数，它有一个属性<em>callee</em>，该属性指向拥有这个<em>arguments</em>对象的函数。<em>this</em>引用的是函数据以执行的环境对象。</p>\n<h2>函数的属性</h2>\n<p>　　JS中的函数均包含两个属性：<em>length</em>和<em>prototype</em>。<em>length</em>属性表示的是函数接受参数的个数；<em>prototype</em>属性用来保存由构造函数构造的所有对象实例的方法。</p>\n<h2>如何鉴别数组</h2>\n<ol>\n<li>(arr instanceof Array) === true;</li>\n<li>Array.isArray(arr) === true;</li>\n<li>Object.prototype.toString.call(arr) === ’[Object Array]’</li>\n<li>Object.prototype.toString.apply(arr) === ’[Object Array]’</li>\n</ol>","frontmatter":{"title":"JavaScript基础（二）","date":"August 29, 2017","description":"本文主要介绍了js数据类型以及作用域链。"}}},"pageContext":{"slug":"/javascript/20170829011122/","previous":{"fields":{"slug":"/javascript/20170829010341/"},"frontmatter":{"title":"JavaScript基础（一）"}},"next":{"fields":{"slug":"/image/20171105132655/"},"frontmatter":{"title":"图片等比例缩放"}}}}