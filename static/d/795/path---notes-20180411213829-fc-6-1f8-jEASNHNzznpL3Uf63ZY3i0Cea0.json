{"data":{"site":{"siteMetadata":{"title":"William's Blog","author":"William"}},"markdownRemark":{"id":"c67c877e-18fb-5fe1-9217-21dad14814b9","excerpt":"问题背景 　　在项目开发中，querySelector/querySelectorAll经常被用来选择目标元素。最近笔者在开发图片轮播组件时使用querySelectorAll来选择待轮播的图片元素，然后拟将返回的列表中元素的排列顺序当做元素的展示顺序。这时有一个问题不禁困扰着笔者，querySelectorAll…","html":"<h2>问题背景</h2>\n<p>　　在项目开发中，querySelector/querySelectorAll经常被用来选择目标元素。最近笔者在开发图片轮播组件时使用querySelectorAll来选择待轮播的图片元素，然后拟将返回的列表中元素的排列顺序当做元素的展示顺序。这时有一个问题不禁困扰着笔者，querySelectorAll返回的元素列表中的元素究竟是以何种顺序排列？笔者查阅了相关资料，弄清楚了querySelector/querySelectorAll遍历元素的顺序。</p>\n<h2>问题解答</h2>\n<p>　　关于querySelector/querySelectorAll遍历元素的顺序，<a href=\"https://www.w3.org/TR/selectors-api/#queryselector\">Selectors API文档</a>已经进行了详细的描述：</p>\n<blockquote>\n<p>The querySelector() methods on the Document, DocumentFragment, and Element interfaces must return the first matching Element node within the subtrees of the context node. If there is no matching Element, the method must return null.</p>\n</blockquote>\n<blockquote>\n<p>The querySelectorAll() methods on the Document, DocumentFragment, and Element interfaces must return a NodeList containing all of the matching Element nodes within the subtrees of the context node, in document order. If there are no matching nodes, the method must return an empty NodeList.</p>\n</blockquote>\n<p>　　根据文档的描述，可以作如下总结：querySelectorAll按照文档顺序（document order）来遍历所有元素，并且将查找到的目标元素依次存储到一个列表，最后返回该列表；querySelector只返回查找到的第一个目标元素。<br>\n　　<a href=\"https://www.w3.org/TR/selectors-api/#document-order\">Selectors API文档</a>对文档顺序（document order）的定义如下：</p>\n<blockquote>\n<p>The term document order means a depth-first pre-order traversal of the DOM tree or subtree in question. </p>\n</blockquote>\n<p>　　根据文档的描述，文档顺序是<strong>按照深度优先结合先序遍历的方式遍历DOM树及其子树的顺序</strong>。<br>\n　　DOM树构建时元素节点的插入顺序直接影响了querySelector/querySelectorAll遍历元素的顺序。浏览器构建DOM树时元素节点的插入顺序又是怎样的呢？<br>\n　　根据以色列的开发者Tali Garsiel的<a href=\"https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/\">研究成果</a>以及<a href=\"https://www.w3.org/TR/html5/syntax.html\">html5标准</a>可以知道，<strong>浏览器是按照html文档字节流的顺序来解析html文档并生成DOM树的</strong>，即元素插入到DOM树的顺序是元素在html文档字节流中出现的先后顺序。<br>\n　　根据上述内容可以得出如下结论：<strong>querySelector/querySelectorAll遍历元素的顺序与元素在html文档字节流中出现的顺序一致</strong>。</p>","frontmatter":{"title":"querySelector/querySelectorAll遍历元素的顺序","date":"April 11, 2018","description":"在项目开发中，querySelector/querySelectorAll经常被用来选择目标元素。最近笔者在开发图片轮播组件时使用querySelectorAll来选择待轮播的图片元素，然后拟将返回的列表中元素的排列顺序当做元素的展示顺序。这时有一个问题不禁困扰着笔者，querySelectorAll返回的元素列表中的元素究竟是以何种顺序排列？笔者查阅了相关资料，弄清楚了querySelector/querySelectorAll遍历元素的顺序。"}}},"pageContext":{"slug":"/notes/20180411213829/","previous":{"fields":{"slug":"/notes/20180321215307/"},"frontmatter":{"title":"移动端浏览器click事件延迟触发的研究"}},"next":{"fields":{"slug":"/notes/20180412215709/"},"frontmatter":{"title":"现代浏览器的工作原理（一）"}}}}